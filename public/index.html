<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
</head>
<body class="theme-sunrise font-default font-size-normal">
    <!-- –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò -->
    <div id="authScreen" class="auth-container">
        <div class="auth-card">
            <h2 class="auth-title">–ß–∞—Ç —Å–∏—Å—Ç–µ–º–∞</h2>
            
            <div class="tabs">
                <div class="tab active" onclick="auth.showAuthTab('login')" data-tab="login">–í—Ö–æ–¥</div>
                <div class="tab" onclick="auth.showAuthTab('register')" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
            </div>
            
            <!-- –§–û–†–ú–ê –í–•–û–î–ê -->
            <div id="loginForm">
                <div class="form-group">
                    <label class="form-label">üë§ –õ–æ–≥–∏–Ω</label>
                    <input type="text" class="form-input" id="authUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω">
                </div>
                <div class="form-group">
                    <label class="form-label">üîë –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-input" id="authPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" onkeypress="if(event.key=='Enter') auth.login()">
                </div>
                <button class="btn btn-primary w-full" onclick="auth.login()" id="loginBtn">
                    <span>üö™ –í–æ–π—Ç–∏</span>
                </button>
            </div>
            
            <!-- –§–û–†–ú–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò -->
            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label class="form-label">üë§ –õ–æ–≥–∏–Ω</label>
                    <input type="text" class="form-input" id="regUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
                </div>
                <div class="form-group">
                    <label class="form-label">üîë –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-input" id="regPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)">
                </div>
                <div class="form-group">
                    <label class="form-label">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-input" id="regPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" onkeypress="if(event.key=='Enter') auth.register()">
                </div>
                <button class="btn btn-primary w-full" onclick="auth.register()" id="registerBtn">
                    <span>üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span>
                </button>
            </div>
        </div>
    </div>

    <!-- –ò–ù–¢–ï–†–§–ï–ô–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
    <div id="userInterface" class="user-interface">
        <div class="user-header">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div id="userDisplayName" style="font-weight: 600; font-size: 18px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div id="userRole" style="font-size: 14px; opacity: 0.7;">–†–æ–ª—å</div>
                </div>
            </div>
            <div class="header-actions">
                <button class="settings-btn" onclick="userSettings.show()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button class="btn btn-primary" onclick="auth.logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>
        </div>

        <!-- –¢–ê–ë–´ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
        <div class="tabs" style="margin: 0 30px 20px;">
            <div class="tab active" onclick="auth.showUserTab('listeners')" data-tab="listeners">üéß –°–ª—É—à–∞—Ç–µ–ª–∏</div>
            <div class="tab" onclick="auth.showUserTab('notifications')" data-tab="notifications">üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
        </div>

        <!-- –í–´–ë–û–† –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenersTab" class="p-20">
            <h2 class="text-center mb-20">üéß –í—ã–±–µ—Ä–∏—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª—è</h2>
            <div class="listener-selection" id="listenerCards">
                <div class="text-center" style="grid-column: 1/-1;">
                    <div class="loading"></div>
                    <p style="margin-top: 10px; color: var(--text-color); opacity: 0.7;">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π...</p>
                </div>
            </div>
            <div class="text-center mt-20">
                <button class="btn btn-primary" onclick="listeners.selectRandom()">
                    <span>üé≤ –í—ã–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è</span>
                </button>
            </div>
        </div>

        <!-- –ß–ê–¢ –° –°–õ–£–®–ê–¢–ï–õ–ï–ú -->
        <div id="userChatSection" class="hidden">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="currentListenerRating">0.0</div>
                    <div class="stat-label">‚≠ê –†–µ–π—Ç–∏–Ω–≥ —Å–ª—É—à–∞—Ç–µ–ª—è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="chatDuration">0:00</div>
                    <div class="stat-label">‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–∞—Ç–∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="messageCount">0</div>
                    <div class="stat-label">üí¨ –°–æ–æ–±—â–µ–Ω–∏–π</div>
                </div>
            </div>

            <div class="user-chat-container">
                <div class="messages-container" id="userMessagesContainer">
                    <div style="text-align: center; color: #7f8c8d; margin-top: 50px;">
                        <div>üí¨ –ß–∞—Ç –Ω–∞—á–∞—Ç</div>
                        <div style="font-size: 14px; margin-top: 10px;">–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ —Å –≤–∞—à–∏–º —Å–ª—É—à–∞—Ç–µ–ª–µ–º</div>
                    </div>
                </div>
                <div class="message-input-container">
                    <input type="text" class="message-input" id="userMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... (Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)" onkeypress="if(event.key=='Enter') chat.sendUserMessage()">
                    <button class="send-btn" onclick="chat.sendUserMessage()">üì§</button>
                </div>
            </div>

            <!-- –í–ò–î–ñ–ï–¢ –û–¶–ï–ù–ö–ò -->
            <div class="content-card" style="margin: 20px 30px;">
                <h3 class="text-center mb-20">‚≠ê –û—Ü–µ–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å–ª—É—à–∞—Ç–µ–ª—è</h3>
                <div class="rating-widget" id="userRatingWidget">
                    <span class="rating-star" onclick="chat.selectRating(1)" data-rating="1">‚òÖ</span>
                    <span class="rating-star" onclick="chat.selectRating(2)" data-rating="2">‚òÖ</span>
                    <span class="rating-star" onclick="chat.selectRating(3)" data-rating="3">‚òÖ</span>
                    <span class="rating-star" onclick="chat.selectRating(4)" data-rating="4">‚òÖ</span>
                    <span class="rating-star" onclick="chat.selectRating(5)" data-rating="5">‚òÖ</span>
                </div>
                <div class="form-group">
                    <label class="form-label">üìù –û—Ç–∑—ã–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea class="form-input" id="reviewText" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –æ—Ç–∑—ã–≤ –æ —Ä–∞–±–æ—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª—è..." rows="3"></textarea>
                </div>
                <div class="text-center mt-20">
                    <button class="btn btn-primary" onclick="chat.submitRating()">
                        <span>‚≠ê –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</span>
                    </button>
                    <button class="btn btn-secondary" onclick="chat.end()" style="margin-left: 10px;">
                        <span>üö™ –ó–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
        <div id="userNotificationsTab" class="hidden p-20">
            <div class="content-card">
                <h3 class="mb-20">üì¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <div class="reviews-container" id="userNotificationsContainer">
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <div>üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                        <div style="font-size: 14px; margin-top: 10px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤–∞–∂–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ù–ê–°–¢–†–û–ô–ö–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
        <div id="userSettings" class="hidden">
            <div class="settings-panel" style="margin: 0 30px;">
                <div class="settings-section">
                    <div class="flex justify-between items-center">
                        <h3 class="settings-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                        <button class="btn btn-secondary" onclick="userSettings.hide()">‚Üê –ù–∞–∑–∞–¥</button>
                    </div>
                </div>
                <div id="userThemeSettings"></div>
            </div>
        </div>
    </div>

    <!-- –ò–ù–¢–ï–†–§–ï–ô–° –°–õ–£–®–ê–¢–ï–õ–Ø -->
    <div id="listenerInterface" class="listener-interface">
        <div class="user-header">
            <div class="user-info">
                <div class="user-avatar" id="listenerAvatar">L</div>
                <div>
                    <div id="listenerDisplayName" style="font-weight: 600; font-size: 18px;">–°–ª—É—à–∞—Ç–µ–ª—å</div>
                    <div id="listenerRole" style="font-size: 14px; opacity: 0.7;">–°–ª—É—à–∞—Ç–µ–ª—å</div>
                    <div class="listener-rating">
                        <span class="star">‚òÖ</span>
                        <span id="listenerRatingValue">0.0</span>
                        <span>(</span><span id="listenerRatingCount">0</span><span>)</span>
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <button class="settings-btn" onclick="listenerSettings.show()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button class="btn btn-primary" onclick="auth.logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>
        </div>

        <!-- –¢–ê–ë–´ –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div class="tabs" style="margin: 0 30px 20px;">
            <div class="tab active" onclick="auth.showListenerTab('chats')" data-tab="chats">üí¨ –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</div>
            <div class="tab" onclick="auth.showListenerTab('reviews')" data-tab="reviews">‚≠ê –ú–æ–∏ –æ—Ç–∑—ã–≤—ã</div>
            <div class="tab" onclick="auth.showListenerTab('stats')" data-tab="stats">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="tab" onclick="auth.showListenerTab('notifications')" data-tab="notifications">üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
        </div>

        <!-- –ß–ê–¢–´ –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenerChatsTab" class="p-20">
            <div class="content-card">
                <h3 class="mb-20">üí¨ –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</h3>
                <div class="chat-container">
                    <div class="chats-list" id="listenerChatsList">
                        <div style="text-align: center; padding: 20px; color: #7f8c8d;">
                            <div class="loading"></div>
                            <p style="margin-top: 10px;">–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤...</p>
                        </div>
                    </div>
                    <div class="chat-messages" style="flex: 1; display: flex; flex-direction: column;">
                        <div class="messages-container" id="listenerMessagesContainer">
                            <div style="text-align: center; color: #7f8c8d; margin-top: 50px;">
                                <div>üí¨ –í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è</div>
                                <div style="font-size: 14px; margin-top: 10px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                            </div>
                        </div>
                        <div class="message-input-container">
                            <input type="text" class="message-input" id="listenerMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... (Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)" onkeypress="if(event.key=='Enter') chat.sendListenerMessage()">
                            <button class="send-btn" onclick="chat.sendListenerMessage()">üì§</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–¢–ó–´–í–´ –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenerReviewsTab" class="hidden p-20">
            <div class="content-card">
                <h3 class="mb-20">‚≠ê –û—Ç–∑—ã–≤—ã –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ</h3>
                <div class="reviews-container" id="listenerReviewsContainer">
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <div>‚≠ê –û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
                        <div style="font-size: 14px; margin-top: 10px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞–≤—è—Ç –æ—Ç–∑—ã–≤—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–∞—Ç–æ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenerStatsTab" class="hidden p-20">
            <div class="content-card">
                <h3 class="mb-20">üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="listenerTotalChats">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —á–∞—Ç–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="listenerAvgRating">0.0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="listenerResponseTime">0—Å</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="listenerOnlineTime">0—á</div>
                        <div class="stat-label">–í—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenerNotificationsTab" class="hidden p-20">
            <div class="content-card">
                <h3 class="mb-20">üì¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <div class="reviews-container" id="listenerNotificationsContainer">
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <div>üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                        <div style="font-size: 14px; margin-top: 10px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤–∞–∂–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ù–ê–°–¢–†–û–ô–ö–ò –°–õ–£–®–ê–¢–ï–õ–Ø -->
        <div id="listenerSettings" class="hidden">
            <div class="settings-panel" style="margin: 0 30px 30px;">
                <div class="settings-section">
                    <div class="flex justify-between items-center">
                        <h3 class="settings-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                        <button class="btn btn-secondary" onclick="listenerSettings.hide()">‚Üê –ù–∞–∑–∞–¥</button>
                    </div>
                </div>
                <div id="listenerThemeSettings"></div>
            </div>
        </div>
    </div>

    <!-- –ü–ê–ù–ï–õ–¨ –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê -->
    <div id="adminPanel" class="admin-panel">
        <!-- ... –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–û–ë–ê–í–õ–ï–ù–ò–Ø –°–û–¢–†–£–î–ù–ò–ö–ê -->
    <div id="addStaffModal" class="modal">
        <!-- ... –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->
    </div>

    <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div class="notification" id="notification"></div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/listeners.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>

    <!-- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
        app.init();
    });
    </script>
</body>
</html>
