
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</title>
    <link rel="stylesheet" href="style.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login" onclick="showAuthTab('login')">–í—Ö–æ–¥</button>
                <button class="auth-tab" data-tab="register" onclick="showAuthTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
            
            <div id="loginForm">
                <div class="form-group">
                    <label>–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="authUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="authPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn btn-primary" id="loginBtn" onclick="login()">–í–æ–π—Ç–∏</button>
            </div>
            
            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label>–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="regUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
                </div>
                <div class="form-group">
                    <label>–ò–º—è:</label>
                    <input type="text" id="regDisplayName" placeholder="–í–∞—à–µ –∏–º—è">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="regEmail" placeholder="–í–∞—à email">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="regPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="regPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn btn-primary" id="registerBtn" onclick="register()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="userInterface" class="interface hidden">
        <div class="header">
            <div class="user-info">
                <span class="avatar" id="userAvatar">üë§</span>
                <div>
                    <div id="userDisplayName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div id="userRole">–†–æ–ª—å</div>
                </div>
            </div>
            <button class="btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showUserTab('listeners')">üéß –°–ª—É—à–∞—Ç–µ–ª–∏</button>
            <button class="tab" onclick="showUserTab('notifications')">üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
            <button class="tab" onclick="showUserTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        
        <div id="listenersTab">
            <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏</h2>
            <div id="listenerCards" class="listener-cards">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–ª—É—à–∞—Ç–µ–ª–µ–π -->
            </div>
        </div>
        
        <div id="userNotificationsTab" class="hidden">
            <h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
            <div id="userNotificationsList">
                <!-- –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
            </div>
        </div>
        
        <div id="userSettings" class="hidden">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
            <!-- –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        </div>
        
        <!-- –ß–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="userChatSection" class="hidden">
            <div class="chat-section">
                <div class="chat-header">
                    <div>–ß–∞—Ç —Å–æ —Å–ª—É—à–∞—Ç–µ–ª–µ–º</div>
                    <button class="btn btn-small" onclick="endChat()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                </div>
                <div id="userMessagesContainer" class="messages-container"></div>
                <div class="chat-input">
                    <input type="text" id="userMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="btn btn-primary" onclick="sendUserMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–ª—É—à–∞—Ç–µ–ª—è -->
    <div id="listenerInterface" class="interface hidden">
        <div class="header">
            <div class="user-info">
                <span class="avatar" id="listenerAvatar">üéß</span>
                <div>
                    <div id="listenerDisplayName">–°–ª—É—à–∞—Ç–µ–ª—å</div>
                    <div>–†–µ–π—Ç–∏–Ω–≥: <span id="listenerRatingValue">0.0</span> (<span id="listenerRatingCount">0</span>)</div>
                </div>
            </div>
            <button class="btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showListenerTab('chats')">üí¨ –ß–∞—Ç—ã</button>
            <button class="tab" onclick="showListenerTab('reviews')">‚≠ê –û—Ç–∑—ã–≤—ã</button>
            <button class="tab" onclick="showListenerTab('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="tab" onclick="showListenerTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        
        <div id="listenerChatsTab">
            <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</h2>
            <div id="listenerChatsList">
                <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
            </div>
        </div>
        
        <div id="listenerReviewsTab" class="hidden">
            <h2>–û—Ç–∑—ã–≤—ã</h2>
            <div id="listenerReviewsList">
                <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ -->
            </div>
        </div>
        
        <div id="listenerStatsTab" class="hidden">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        </div>
        
        <div id="listenerSettings" class="hidden">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª—É—à–∞—Ç–µ–ª—è -->
        </div>
        
        <!-- –ß–∞—Ç —Å–ª—É—à–∞—Ç–µ–ª—è -->
        <div id="listenerChatSection" class="hidden">
            <div class="chat-section">
                <div class="chat-header">
                    <div>–ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</div>
                    <button class="btn btn-small" onclick="endChat()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                </div>
                <div id="listenerMessagesContainer" class="messages-container"></div>
                <div class="chat-input">
                    <input type="text" id="listenerMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="btn btn-primary" onclick="sendListenerMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div id="adminPanel" class="interface hidden">
        <div class="header">
            <div class="user-info">
                <span class="avatar" id="adminAvatar">‚öôÔ∏è</span>
                <div>
                    <div id="adminDisplayName">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                    <div id="adminRole">–†–æ–ª—å</div>
                </div>
            </div>
            <button class="btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        </div>
        
        <div class="admin-panel">
            <div class="admin-nav">
                <button class="nav-item active" data-section="users" onclick="showAdminSection('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                <button class="nav-item" data-section="staff" onclick="showAdminSection('staff')">üéß –ü–µ—Ä—Å–æ–Ω–∞–ª</button>
                <button class="nav-item" data-section="chats" onclick="showAdminSection('chats')">üí¨ –ß–∞—Ç—ã</button>
                <button class="nav-item" onclick="showAddStaffModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª</button>
            </div>
            
            <div id="usersSection" class="admin-section">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <table id="usersTable">
                    <thead>
                        <tr>
                            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                            <th>Email</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    </tbody>
                </table>
            </div>
            
            <div id="staffSection" class="admin-section hidden">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</h2>
                <table id="staffTable">
                    <thead>
                        <tr>
                            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                            <th>Email</th>
                            <th>–†–æ–ª—å</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–†–µ–π—Ç–∏–Ω–≥</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ -->
                    </tbody>
                </table>
            </div>
            
            <div id="chatsSection" class="admin-section hidden">
                <h2>–í—Å–µ —á–∞—Ç—ã</h2>
                <div id="adminChatsList">
                    <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ -->
    <div id="addStaffModal" class="modal">
        <div class="modal-content">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª</h2>
            <div class="form-group">
                <label>–õ–æ–≥–∏–Ω:</label>
                <input type="text" id="newStaffUsername" placeholder="–õ–æ–≥–∏–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
            </div>
            <div class="form-group">
                <label>–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="newStaffPassword" placeholder="–ü–∞—Ä–æ–ª—å">
            </div>
            <div class="form-group">
                <label>–ò–º—è:</label>
                <input type="text" id="newStaffName" placeholder="–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="newStaffEmail" placeholder="Email">
            </div>
            <div class="form-group">
                <label>–†–æ–ª—å:</label>
                <select id="newStaffRole">
                    <option value="listener">üéß –°–ª—É—à–∞—Ç–µ–ª—å</option>
                    <option value="admin">‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                </select>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="addNewStaff()">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn" onclick="closeAddStaffModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ü–µ–Ω–∫–∏ -->
    <div id="ratingModal" class="modal">
        <div class="modal-content">
            <h2>–û—Ü–µ–Ω–∏—Ç–µ —á–∞—Ç</h2>
            <div class="form-group">
                <label>–û—Ü–µ–Ω–∫–∞:</label>
                <div>
                    <input type="radio" name="rating" value="1"> 1 ‚òÖ
                    <input type="radio" name="rating" value="2"> 2 ‚òÖ‚òÖ
                    <input type="radio" name="rating" value="3"> 3 ‚òÖ‚òÖ‚òÖ
                    <input type="radio" name="rating" value="4"> 4 ‚òÖ‚òÖ‚òÖ‚òÖ
                    <input type="radio" name="rating" value="5"> 5 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                </div>
            </div>
            <div class="form-group">
                <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                <textarea id="ratingComment" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px;"></textarea>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <button class="btn btn-primary" onclick="submitRating()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                <button class="btn" onclick="closeRatingModal()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="app.js"></script>
    <script src="auth.js"></script>
    <script src="admin.js"></script>
    <script src="chat.js"></script>
    <script src="listeners.js"></script>
</body>
</html>
